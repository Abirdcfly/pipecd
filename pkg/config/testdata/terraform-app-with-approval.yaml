apiVersion: pipecd.dev/v1beta1
kind: TerraformApp
spec:
  pipeline:
    stages:
      - name: TERRAFORM_PLAN
      - name: WAIT_APPROVAL
        with:
          approvers:
            - foo
            - bar
      - name: TERRAFORM_APPLY
  input:
    workspace: dev
    terraformVersion: 0.12.23
  destination: dev-terraform

#---
# apiVersion: pipecd.dev/v1beta1
# kind: TerraformApp
# spec:
#   pipeline:
#     stages:
#       - name: TERRAFORM_PLAN
#         with:
#           workspace: dev
#       - name: TERRAFORM_APPLY
#         with:
#           workspace: dev
#       - name: WAIT_APPROVAL
#       - name: TERRAFORM_PLAN
#         with:
#           workspace: prod
#       - name: TERRAFORM_APPLY
#         with:
#           workspace: prod
#   input:
#     terraformVersion: 0.12.23
#   destination: gcp-terraform
