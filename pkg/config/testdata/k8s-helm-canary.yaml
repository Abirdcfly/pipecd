kind: K8sApp
spec:
  pipeline:
    stages:
      - name: K8S_CANARY_OUT
        with:
          weight: 10
      - name: VERIFICATION
        with:
          duration: 10m
          https:
            - url: http://smock.test
              expected: 200
              internal: 1m
      - name: APPROVAL
      - name: K8S_APPLY
      - name: K8S_CANARY_IN
  input:
    helm:
      chart: charts/demoapp
      valueFiles:
      - values.yaml
      helmVersion: 3.1.1
